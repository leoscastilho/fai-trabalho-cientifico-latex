% Definições por grupos de elementos textuais
\newenvironment{ElementosExternos}{
    \pagenumbering{roman}
    \pagestyle{numbered}
}{}

\newenvironment{ElementosPreTextuais}{
    \pagestyle{numbered}
}{}

\newenvironment{ElementosTextuais}{
    \clearpage
    \setcounter{savepage}{\value{page}} % Save current page number
    \pagenumbering{arabic}
    \setcounter{page}{\value{savepage}} % Restore the page number
    \pagestyle{numbered}
}{
    \newpage
}

\newenvironment{ElementosPosTextuais}{
    \clearpage
    \pagestyle{numbered}
}{}

% Definições por tipos de conteúdo
\newenvironment{Capa}{
    \setcounter{page}{1}
    \thispagestyle{empty} % Remove numeração da primeira página
    \begin{center}
}{
    \textbf{\theinstitution}
    
    \vfill
    
    \textbf{\fontsize{12}{14}\selectfont\MakeUppercase{\thetitle}}
    
    \vfill
    \textbf{\theplace}\\
    \textbf{\theyear}
    \end{center}
    \newpage
}

\newenvironment{Lombada}{
    \begin{center}
}{
    \textbf{\theinstitution}
    
    \vfill
    
    \begin{center}
        \PrintAuthorsLombada
    \end{center}
    
    \vfill
    
    \textbf{\fontsize{12}{14}\selectfont\MakeUppercase{\thetitle}}
    
    \vfill
    
    \textbf{\theplace}\\
    \textbf{\theyear}
    \end{center}
    \newpage
}

\newenvironment{FolhaDeRosto}{
    
}{}

\newenvironment{Errata}{
    
}{}

\newenvironment{FolhaDeAprovacao}{
    
}{}

\newenvironment{Dedicatoria}{
    
}{}

\newenvironment{Agradecimentos}{
    \begin{center}
    \textbf{AGRADECIMENTOS}
    \end{center}
    \noindent
}{
    \newpage
}

\newenvironment{Epigrafe}{
    \vspace*{\fill}
    \begin{flushright}
    \begin{minipage}{0.5\textwidth}
    \raggedleft
    \singlespacing
    \justifying
}{
    \end{minipage}
    \end{flushright}
    \vspace{1cm}
    
    \newpage
}

\newenvironment{Resumo}{
    \begin{center}
    \textbf{RESUMO}
    \end{center}
    
    \justifying
    \begin{singlespace}
    \theabstract
    \end{singlespace}
    
    \textbf{Palavras-chave:} \thekeywords
    
    \vspace{1cm}
    \begin{center}
    \textbf{ABSTRACT}
    \end{center}
    
    \justifying
    \begin{singlespace}
    \theabstractenglish
    \end{singlespace}
    
    \textbf{Keywords:} \thekeywordsenglish
}{
    \newpage
}


% Comandos para listas condicionais de ilustrações
% Usando sistema de duas passadas com arquivo auxiliar
\newcommand{\ListaDeFiguras}{%
    \ifhasfiguras{
        \clearpage
        \begin{center}
        \textbf{LISTA DE FIGURAS}
        \vspace{0.3cm}
        \end{center}
        \listoffigura
        \clearpage
    }{}
}

\newcommand{\ListaDeFotografias}{%
    \ifhasfotografias{
        \clearpage
        \begin{center}
        \textbf{LISTA DE FOTOGRAFIAS}
        \vspace{0.3cm}
        \end{center}
        \listoffotografia
        \clearpage
    }{}
}

\newcommand{\ListaDeGraficos}{%
    \ifhasgraficos{
        \clearpage
        \begin{center}
        \textbf{LISTA DE GRÁFICOS}
        \vspace{0.3cm}
        \end{center}
        \listofgrafico
        \clearpage
    }{}
}

\newcommand{\ListaDeQuadros}{%
    \ifhasquadros{
        \clearpage
        \begin{center}
        \textbf{LISTA DE QUADROS}
        \vspace{0.3cm}
        \end{center}
        \listofquadro
        \clearpage
    }{}
}

\newenvironment{ListaDeTabelas}{
    
}{}

% Create a counter for siglas
\newcounter{siglacount}

% Create a temporary storage for siglas
\newtoks\siglacontent

% Modified sigla command that increments counter and stores content
\newcommand{\sigla}[2]{%
  \stepcounter{siglacount}%
  \siglacontent\expandafter{\the\siglacontent #1 \> - \quad #2 \\}%
}

% Modified environment that checks the counter
\newenvironment{ListaAbrevESiglas}{%
  % Reset counter and content at the beginning
  \setcounter{siglacount}{0}%
  \siglacontent{}%
}{%
  % Only display if more than 9 siglas
  \ifnum\value{siglacount}>9
    \clearpage
    \begin{center}
    \textbf{LISTA DE ABREVIATURAS E SIGLAS}
    \end{center}
    \vspace{0.5cm}
    \begin{tabbing}
    \hspace{2cm} \= \kill % Set tab stop at 2.5cm
    \the\siglacontent
    \end{tabbing}
    \clearpage
  \fi
}

\newenvironment{ListaDeSimbolos}{
    
}{}

\newenvironment{Sumario}{
    \clearpage
    \tableofcontents
    \thispagestyle{numbered}
    \clearpage
}{}

\newenvironment{Introducao}{
    
}{}

\newenvironment{Desenvolvimento}{
    
}{}

\newenvironment{Conclusao}{
    
}{}

\newenvironment{Referencias}{
    \thispagestyle{empty} % Remove numeração da primeira página
}{
    \printbibliography
}

\newenvironment{Glossario}{
    
}{}

% ============================================================================
% SISTEMA DE APÊNDICES AUTOMÁTICO
% ============================================================================

\newcommand{\myAppendixHeading}[1]{%
    \vspace{2em}%
    \begin{center}%
    \Large\bfseries #1%
    \end{center}%
    \vspace{1em}%
}

% Contador para apêndices
\newcounter{appendixcounter}
\setcounter{appendixcounter}{0}

% Comando para processar uma entrada de apêndice
\newcommand{\appendixentry}[2]{%
    \IfFileExists{apendices/#1.tex}{%
        \stepcounter{appendixcounter}%
        \clearpage%
        \thispagestyle{numbered}%
        {\noindent\normalsize APÊNDICE \Alph{appendixcounter} -- \MakeUppercase{#2}}%
        \vspace{1em}%
        \addtocontents{toc}{%
            \protect\vspace{0em}%
            \protect\noindent\normalsize APÊNDICE \Alph{appendixcounter} -- \MakeUppercase{#2}%
            \protect\cftdotfill{\cftdotsep}\normalsize\thepage\protect\par%
        }%
        \label{apendice:\Alph{appendixcounter}}%
        \input{apendices/#1}%
    }{%
        \PackageWarning{appendix}{Arquivo apendices/#1.tex não encontrado}%
    }%
}

% Comando para incluir todos os apêndices automaticamente
% Lê a configuração do arquivo appendix_list.tex
\newcommand{\includeallappendices}{%
    \IfFileExists{apendices/appendix_list.tex}{%
        \input{apendices/appendix_list.tex}%
    }{%
        \PackageError{appendix}{Arquivo apendices/appendix_list.tex não encontrado}{%
            Crie o arquivo apendices/appendix_list.tex com a lista de apêndices%
        }%
    }%
}

\newenvironment{Apendice}{
    \includeallappendices
}{}

\newenvironment{Anexo}{
    
}{}

\newenvironment{Indice}{
    
}{}